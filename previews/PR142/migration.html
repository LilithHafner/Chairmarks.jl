<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to migrate from BenchmarkTools to Chairmarks | Chairmarks.jl</title>
    <meta name="description" content="Documentation for Chairmarks.jl">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/previews/PR142/assets/style.BTWPlyDw.css" as="style">
    <link rel="preload stylesheet" href="/previews/PR142/vp-icons.css" as="style">
    
    <script type="module" src="/previews/PR142/assets/app.CD2ktqdy.js"></script>
    <link rel="preload" href="/previews/PR142/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/previews/PR142/assets/chunks/theme.CbjkeR84.js">
    <link rel="modulepreload" href="/previews/PR142/assets/chunks/framework.DM0OY9uf.js">
    <link rel="modulepreload" href="/previews/PR142/assets/migration.md.D0YbtEAg.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c3508ec8></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c3508ec8> Skip to content </a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar" data-v-f1e365da data-v-822684d1><div class="wrapper" data-v-822684d1><div class="container" data-v-822684d1><div class="title" data-v-822684d1><div class="VPNavBarTitle has-sidebar" data-v-822684d1 data-v-0f4f798b><a class="title" href="/previews/PR142/" data-v-0f4f798b><!--[--><!--]--><!----><span data-v-0f4f798b>Chairmarks.jl</span><!--[--><!--]--></a></div></div><div class="content" data-v-822684d1><div class="content-body" data-v-822684d1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-822684d1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-822684d1 data-v-e6d46098><span id="main-nav-aria-label" class="visually-hidden" data-v-e6d46098> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/previews/PR142/index" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/previews/PR142/why" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Why use Chairmarks?</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/previews/PR142/tutorial" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Tutorial</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>How To</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link active" href="/previews/PR142/migration" data-v-acbfed09><!--[--><span data-v-acbfed09>migrate from BenchmarkTools</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/previews/PR142/autoload" data-v-acbfed09><!--[--><span data-v-acbfed09>install Chairmarks ergonomically</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/previews/PR142/regressions" data-v-acbfed09><!--[--><span data-v-acbfed09>perform automated regression testing on a package</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/previews/PR142/reference" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Reference</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/previews/PR142/explanations" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Explanations</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-822684d1 data-v-af096f4a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-af096f4a data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-822684d1 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/LilithHafner/Chairmarks.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-822684d1 data-v-925effce data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-04f5c5e9><span class="vpi-more-horizontal icon" data-v-04f5c5e9></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><!----><!--[--><!--[--><!----><div class="group" data-v-925effce><div class="item appearance" data-v-925effce><p class="label" data-v-925effce>Appearance</p><div class="appearance-action" data-v-925effce><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-925effce data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-925effce><div class="item social-links" data-v-925effce><div class="VPSocialLinks social-links-list" data-v-925effce data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/LilithHafner/Chairmarks.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-822684d1 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-822684d1><div class="divider-line" data-v-822684d1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-070ab83d><span class="vpi-align-left menu-icon" data-v-070ab83d></span><span class="menu-text" data-v-070ab83d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-bc9dc845><button data-v-bc9dc845>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a9a9e638 data-v-18756405><div class="curtain" data-v-18756405></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-18756405><span class="visually-hidden" id="sidebar-aria-label" data-v-18756405> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0" data-v-9e426adc data-v-196b2e5f><!----><div class="items" data-v-196b2e5f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/previews/PR142/index" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Home</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/previews/PR142/why" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Why use Chairmarks?</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/previews/PR142/tutorial" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Tutorial</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible has-active" data-v-9e426adc data-v-196b2e5f><div class="item" role="button" tabindex="0" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><h2 class="text" data-v-196b2e5f>How To</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-196b2e5f><span class="vpi-chevron-right caret-icon" data-v-196b2e5f></span></div></div><div class="items" data-v-196b2e5f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/previews/PR142/migration" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>migrate from BenchmarkTools</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/previews/PR142/autoload" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>install Chairmarks ergonomically</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/previews/PR142/regressions" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>perform automated regression testing on a package</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0" data-v-9e426adc data-v-196b2e5f><!----><div class="items" data-v-196b2e5f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/previews/PR142/reference" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Reference</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/previews/PR142/explanations" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Explanations</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-sidebar has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6d7b3c46 data-v-b38bf2ff><div class="content" data-v-b38bf2ff><div class="outline-marker" data-v-b38bf2ff></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b38bf2ff>On this page</div><ul class="VPDocOutlineItem root" data-v-b38bf2ff data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _previews_PR142_migration" data-v-83890dd9><div><h1 id="migration" tabindex="-1">How to migrate from BenchmarkTools to Chairmarks <a class="header-anchor" href="#migration" aria-label="Permalink to &quot;How to migrate from BenchmarkTools to Chairmarks {#migration}&quot;">​</a></h1><p>Chairmarks has a similar samples/evals model to BenchmarkTools. It preserves the keyword arguments <code>samples</code>, <code>evals</code>, and <code>seconds</code>. Unlike BenchmarkTools, the <code>seconds</code> argument is honored even as it drops down to the order of 30μs (<code>@b @b hash(rand()) seconds=.00003</code>). While accuracy does decay as the total number of evaluations and samples decreases, it remains quite reasonable (e.g. I see a noise of about 30% when benchmarking <code>@b hash(rand()) seconds=.00003</code>). This makes it much more reasonable to perform meta-analysis such as computing the time it takes to hash a thousand different lengthed arrays with <code>[@b hash(rand(n)) seconds=.001 for n in 1:1000]</code>.</p><p>Both BenchmarkTools and Chairmarks use an evaluation model structured like this:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">samples </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">samples</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    t0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">evals</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    t1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(samples, t1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t0)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    teardown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> samples</span></span></code></pre></div><p>In BenchmarkTools, you specify <code>f</code> and <code>setup</code> with the invocation <code>@benchmark f setup=(setup)</code>. In Chairmarks, you specify <code>f</code> and <code>setup</code> with the invocation <code>@be setup f</code>. In BenchmarkTools, <code>setup</code> and <code>f</code> communicate via shared local variables in code generated by BenchmarkTools. In Chairmarks, the function <code>f</code> is passed the return value of the function <code>setup</code> as an argument. Chairmarks also lets you specify <code>teardown</code>, which is not possible with BenchmarkTools, and an <code>init</code> which can be emulated with interpolation using BenchmarkTools.</p><p>Here are some examples of corresponding invocations in BenchmarkTools and Chairmarks:</p><table tabindex="0"><thead><tr><th style="text-align:right;">BenchmarkTools</th><th style="text-align:right;">Chairmarks</th></tr></thead><tbody><tr><td style="text-align:right;"><code>@btime rand();</code></td><td style="text-align:right;"><code>@b rand()</code></td></tr><tr><td style="text-align:right;"><code>@btime sort!(x) setup=(x=rand(100)) evals=1;</code></td><td style="text-align:right;"><code>@b rand(100) sort! evals=1</code></td></tr><tr><td style="text-align:right;"><code>@btime sort!(x, rev=true) setup=(x=rand(100)) evals=1;</code></td><td style="text-align:right;"><code>@b rand(100) sort!(_, rev=true) evals=1</code></td></tr><tr><td style="text-align:right;"><code>@btime issorted(sort!(x)) || error() setup=(x=rand(100)) evals=1</code></td><td style="text-align:right;"><code>@b rand(100) sort! issorted(_) || error() evals=1</code></td></tr><tr><td style="text-align:right;"><code>let X = rand(100); @btime issorted(sort!($X)) || error() setup=(rand!($X)) evals=1 end</code></td><td style="text-align:right;"><code>@b rand(100) rand! sort! issorted(_) || error() evals=1</code></td></tr><tr><td style="text-align:right;"><code>BenchmarkTools.DEFAULT_PARAMETERS.seconds = 1</code></td><td style="text-align:right;"><code>Chairmarks.DEFAULTS.seconds = 1</code></td></tr></tbody></table><p>For automated regression tests, <a href="https://github.com/LilithHafner/RegressionTests.jl" target="_blank" rel="noreferrer">RegressionTests.jl</a> is a work in progress replacement for the <code>BenchmarkGroup</code> and <code>@benchmarkable</code> system. Because Chairmarks is efficiently and stably autotuned and RegressionTests.jl is inherently robust to noise, there is no need for parameter caching.</p><h3 id="Toplevel-API" tabindex="-1">Toplevel API <a class="header-anchor" href="#Toplevel-API" aria-label="Permalink to &quot;Toplevel API {#Toplevel-API}&quot;">​</a></h3><p>Chairmarks always returns the benchmark result, while BenchmarkTools mirrors the more diverse base API.</p><table tabindex="0"><thead><tr><th style="text-align:right;">BenchmarkTools</th><th style="text-align:right;">Chairmarks</th><th style="text-align:right;">Base</th></tr></thead><tbody><tr><td style="text-align:right;"><code>minimum(@benchmark _)</code></td><td style="text-align:right;"><code>@b</code></td><td style="text-align:right;">N/A</td></tr><tr><td style="text-align:right;"><code>@benchmark</code></td><td style="text-align:right;"><code>@be</code></td><td style="text-align:right;">N/A</td></tr><tr><td style="text-align:right;"><code>@belapsed</code></td><td style="text-align:right;"><code>(@b _).time</code></td><td style="text-align:right;"><code>@elapsed</code></td></tr><tr><td style="text-align:right;"><code>@btime</code></td><td style="text-align:right;"><code>display(@b _); _</code></td><td style="text-align:right;"><code>@time</code></td></tr><tr><td style="text-align:right;">N/A</td><td style="text-align:right;"><code>(@b _).allocs</code></td><td style="text-align:right;"><code>@allocations</code></td></tr><tr><td style="text-align:right;"><code>@ballocated</code></td><td style="text-align:right;"><code>(@b _).bytes</code></td><td style="text-align:right;"><code>@allocated</code></td></tr></tbody></table><p>Chairmarks may provide <code>@belapsed</code>, <code>@btime</code>, <code>@ballocated</code>, and <code>@ballocations</code> in the future.</p><h3 id="fields" tabindex="-1">Fields <a class="header-anchor" href="#fields" aria-label="Permalink to &quot;Fields&quot;">​</a></h3><p>Benchmark results have the following fields:</p><table tabindex="0"><thead><tr><th style="text-align:right;">Chairmarks</th><th style="text-align:right;">BenchmarkTools</th><th style="text-align:right;">Description</th></tr></thead><tbody><tr><td style="text-align:right;"><code>x.time</code></td><td style="text-align:right;"><code>x.time/1e9</code></td><td style="text-align:right;">Runtime in seconds</td></tr><tr><td style="text-align:right;"><code>x.time*1e9</code></td><td style="text-align:right;"><code>x.time</code></td><td style="text-align:right;">Runtime in nanoseconds</td></tr><tr><td style="text-align:right;"><code>x.allocs</code></td><td style="text-align:right;"><code>x.allocs</code></td><td style="text-align:right;">Number of allocations</td></tr><tr><td style="text-align:right;"><code>x.bytes</code></td><td style="text-align:right;"><code>x.memory</code></td><td style="text-align:right;">Number of bytes allocated across all allocations</td></tr><tr><td style="text-align:right;"><code>x.gc_fraction</code></td><td style="text-align:right;"><code>x.gctime / x.time</code></td><td style="text-align:right;">Fraction of time spent in garbage collection</td></tr><tr><td style="text-align:right;"><code>x.gc_time*x.time</code></td><td style="text-align:right;"><code>x.gctime</code></td><td style="text-align:right;">Time spent in garbage collection</td></tr><tr><td style="text-align:right;"><code>x.compile_fraction</code></td><td style="text-align:right;">N/A</td><td style="text-align:right;">Fraction of time spent compiling</td></tr><tr><td style="text-align:right;"><code>x.recompile_fraction</code></td><td style="text-align:right;">N/A</td><td style="text-align:right;">Fraction of time spent compiling which was on recompilation</td></tr><tr><td style="text-align:right;"><code>x.warmup</code></td><td style="text-align:right;"><code>true</code></td><td style="text-align:right;">whether or not the sample had a warmup run before it</td></tr><tr><td style="text-align:right;"><code>x.evals</code></td><td style="text-align:right;"><code>x.params.evals</code></td><td style="text-align:right;">the number of evaluations in the sample</td></tr></tbody></table><p>Note that more fields may be added as more information becomes available.</p><h3 id="Nonconstant-globals-and-interpolation" tabindex="-1">Nonconstant globals and interpolation <a class="header-anchor" href="#Nonconstant-globals-and-interpolation" aria-label="Permalink to &quot;Nonconstant globals and interpolation {#Nonconstant-globals-and-interpolation}&quot;">​</a></h3><p>Like BenchmarkTools, benchmarks that include access to nonconstant globals will receive a performance overhead for that access and you can avoid this via interpolation.</p><p>However, Chairmarks&#39;s arguments are functions evaluated in the scope of the macro call, not quoted expressions <code>eval</code>ed at global scope. This makes nonconstant global access much less of an issue in Chairmarks than BenchmarkTools which, in turn, eliminates much of the need to interpolate variables. For example, the following invocations are all equally fast:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nonconstant global</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(len) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> @b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(len) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># put the `@b` call in a function (highest performance for repeated benchmarks)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f (generic </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> with </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> method)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15.318</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ns (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allocs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 112</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bytes)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> @b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># interpolate (most familiar to BenchmarkTools users)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15.620</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ns (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allocs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 112</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bytes)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> @b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x rand </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># put the access in the setup phase (most concise in simple cases)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15.507</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ns (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allocs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 112</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bytes)</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-4f9813fa><!--[--><!--]--><div class="edit-info" data-v-4f9813fa><div class="edit-link" data-v-4f9813fa><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://https://github.com/LilithHafner/Chairmarks.jl/edit/main/docs/src/migration.md" target="_blank" rel="noreferrer" data-v-4f9813fa><!--[--><span class="vpi-square-pen edit-link-icon" data-v-4f9813fa></span> Edit this page<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-4f9813fa><span class="visually-hidden" id="doc-footer-aria-label" data-v-4f9813fa>Pager</span><div class="pager" data-v-4f9813fa><a class="VPLink link pager-link prev" href="/previews/PR142/tutorial" data-v-4f9813fa><!--[--><span class="desc" data-v-4f9813fa>Previous page</span><span class="title" data-v-4f9813fa>Tutorial</span><!--]--></a></div><div class="pager" data-v-4f9813fa><a class="VPLink link pager-link next" href="/previews/PR142/autoload" data-v-4f9813fa><!--[--><span class="desc" data-v-4f9813fa>Next page</span><span class="title" data-v-4f9813fa>install Chairmarks ergonomically</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860>Made with <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/" target="_blank"><strong>DocumenterVitepress.jl</strong></a><br></p><p class="copyright" data-v-c970a860>© Copyright 2024.</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"autoload.md\":\"DjjwVHlX\",\"explanations.md\":\"DtJpQjcc\",\"index.md\":\"6BCehhuG\",\"migration.md\":\"D0YbtEAg\",\"reference.md\":\"DmPIUa2r\",\"regressions.md\":\"DLgdLcHR\",\"tutorial.md\":\"BCYJaOAO\",\"why.md\":\"DIBJWtFB\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Chairmarks.jl\",\"description\":\"Documentation for Chairmarks.jl\",\"base\":\"/previews/PR142/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"nav\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Why use Chairmarks?\",\"link\":\"/why\"},{\"text\":\"Tutorial\",\"link\":\"/tutorial\"},{\"text\":\"How To\",\"collapsed\":false,\"items\":[{\"text\":\"migrate from BenchmarkTools\",\"link\":\"/migration\"},{\"text\":\"install Chairmarks ergonomically\",\"link\":\"/autoload\"},{\"text\":\"perform automated regression testing on a package\",\"link\":\"/regressions\"}]},{\"text\":\"Reference\",\"link\":\"/reference\"},{\"text\":\"Explanations\",\"link\":\"/explanations\"}],\"sidebar\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Why use Chairmarks?\",\"link\":\"/why\"},{\"text\":\"Tutorial\",\"link\":\"/tutorial\"},{\"text\":\"How To\",\"collapsed\":false,\"items\":[{\"text\":\"migrate from BenchmarkTools\",\"link\":\"/migration\"},{\"text\":\"install Chairmarks ergonomically\",\"link\":\"/autoload\"},{\"text\":\"perform automated regression testing on a package\",\"link\":\"/regressions\"}]},{\"text\":\"Reference\",\"link\":\"/reference\"},{\"text\":\"Explanations\",\"link\":\"/explanations\"}],\"editLink\":{\"pattern\":\"https://https://github.com/LilithHafner/Chairmarks.jl/edit/main/docs/src/:path\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/LilithHafner/Chairmarks.jl\"}],\"footer\":{\"message\":\"Made with <a href=\\\"https://luxdl.github.io/DocumenterVitepress.jl/dev/\\\" target=\\\"_blank\\\"><strong>DocumenterVitepress.jl</strong></a><br>\",\"copyright\":\"© Copyright 2024.\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>