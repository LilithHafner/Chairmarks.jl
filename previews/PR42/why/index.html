<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Why use Chairmarks? · Chairmarks.jl</title><meta name="title" content="Why use Chairmarks? · Chairmarks.jl"/><meta property="og:title" content="Why use Chairmarks? · Chairmarks.jl"/><meta property="twitter:title" content="Why use Chairmarks? · Chairmarks.jl"/><meta name="description" content="Documentation for Chairmarks.jl."/><meta property="og:description" content="Documentation for Chairmarks.jl."/><meta property="twitter:description" content="Documentation for Chairmarks.jl."/><meta property="og:url" content="https://Chairmarks.lilithhafner.com/why/"/><meta property="twitter:url" content="https://Chairmarks.lilithhafner.com/why/"/><link rel="canonical" href="https://Chairmarks.lilithhafner.com/why/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Chairmarks.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Why use Chairmarks?</a><ul class="internal"><li><a class="tocitem" href="#Precise"><span>Precise</span></a></li><li><a class="tocitem" href="#Efficient"><span>Efficient</span></a></li><li><a class="tocitem" href="#Concise"><span>Concise</span></a></li><li><a class="tocitem" href="#Truthful"><span>Truthful</span></a></li><li><a class="tocitem" href="#Innate-qualities"><span>Innate qualities</span></a></li></ul></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><span class="tocitem">How To</span><ul><li><a class="tocitem" href="../migration/">...migrate from BenchmarkTools</a></li><li><a class="tocitem" href="../autoload/">...install Charimarks ergonomically</a></li><li><a class="tocitem" href="../regressions/">...perform automated regression testing on a package</a></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Why use Chairmarks?</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Why use Chairmarks?</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/LilithHafner/Chairmarks.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/LilithHafner/Chairmarks.jl/blob/main/docs/src/why.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Precise"><a class="docs-heading-anchor" href="#Precise">Precise</a><a id="Precise-1"></a><a class="docs-heading-anchor-permalink" href="#Precise" title="Permalink"></a></h2><p>Capable of detecting 1% difference in runtime in ideal conditions</p><pre><code class="language-julia-repl hljs">julia&gt; f(n) = sum(rand() for _ in 1:n)
f (generic function with 1 method)

julia&gt; @b f(1000)
1.074 μs

julia&gt; @b f(1000)
1.075 μs

julia&gt; @b f(1000)
1.076 μs

julia&gt; @b f(1010)
1.086 μs

julia&gt; @b f(1010)
1.087 μs

julia&gt; @b f(1010)
1.087 μs</code></pre><h2 id="Efficient"><a class="docs-heading-anchor" href="#Efficient">Efficient</a><a id="Efficient-1"></a><a class="docs-heading-anchor-permalink" href="#Efficient" title="Permalink"></a></h2><table><tr><th style="text-align: right"></th><th style="text-align: right">Chairmarks</th><th style="text-align: right">BenchmarkTools</th><th style="text-align: right">Ratio</th></tr><tr><td style="text-align: right">TTFX</td><td style="text-align: right">3.4s</td><td style="text-align: right">13.4s</td><td style="text-align: right">4x</td></tr><tr><td style="text-align: right">TTFX excluding precompilation</td><td style="text-align: right">43ms</td><td style="text-align: right">1118ms</td><td style="text-align: right">26x</td></tr><tr><td style="text-align: right">Load time</td><td style="text-align: right">4.2ms</td><td style="text-align: right">131ms</td><td style="text-align: right">31x</td></tr><tr><td style="text-align: right">minimum runtime</td><td style="text-align: right">34μs</td><td style="text-align: right">459ms</td><td style="text-align: right">13,500x</td></tr><tr><td style="text-align: right">default runtime</td><td style="text-align: right">0.1s</td><td style="text-align: right">5s</td><td style="text-align: right">50x</td></tr></table><p>See <a href="https://github.com/LilithHafner/Chairmarks.jl/blob/main/contrib/ttfx_rm_rf_julia.sh">https://github.com/LilithHafner/Chairmarks.jl/blob/main/contrib/ttfx_rm_rf_julia.sh</a> for methodology.</p><h2 id="Concise"><a class="docs-heading-anchor" href="#Concise">Concise</a><a id="Concise-1"></a><a class="docs-heading-anchor-permalink" href="#Concise" title="Permalink"></a></h2><p>Chairmarks uses a concise pipeline syntax to define benchmarks. When providing a single argument, that argument is automatically wrapped in a function for higher performance and executed</p><pre><code class="language-julia-repl hljs">julia&gt; @b sort(rand(100))
1.500 μs (3 allocs: 2.625 KiB)</code></pre><p>When providing two arguments, the first is setup code and only the runtime of the second is measured</p><pre><code class="language-julia-repl hljs">julia&gt; @b rand(100) sort
1.018 μs (2 allocs: 1.750 KiB)</code></pre><p>You may use <code>_</code> in the later arguments to refer to the output of previous arguments</p><pre><code class="language-julia-repl hljs">julia&gt; @b rand(100) sort(_, by=x -&gt; exp(-x))
5.521 μs (2 allocs: 1.750 KiB)</code></pre><p>A third argument can run a &quot;teardown&quot; function to integrate testing into the benchmark and ensure that the benchmarked code is behaving correctly</p><pre><code class="language-julia-repl hljs">julia&gt; @b rand(100) sort(_, by=x -&gt; exp(-x)) issorted(_) || error()
ERROR:
Stacktrace:
 [1] error()
[...]

julia&gt; @b rand(100) sort(_, by=x -&gt; exp(-x)) issorted(_, rev=true) || error()
5.358 μs (2 allocs: 1.750 KiB)</code></pre><p>See <a href="../reference/#Chairmarks.@b-Tuple"><code>@b</code></a> for more info</p><h2 id="Truthful"><a class="docs-heading-anchor" href="#Truthful">Truthful</a><a id="Truthful-1"></a><a class="docs-heading-anchor-permalink" href="#Truthful" title="Permalink"></a></h2><p>Charimarks automatically computes a checksum based on the results of the provided computations, and returns that checksum to the user along with benchmark results. This makes it impossible for the compiler to elide any part of the computation that has an impact on its return value.</p><p>While the checksums are fast, one negative side effect of this is that they add a bit of overhead to the measured runtime, and that overhead can vary depending on the function being benchmarked. These checksums are performed by computing a map over the returned values and a reduction over those mapped values. You can disable this by passing the <code>checksum=false</code> keyword argument, possibly in combination with a custom teardown function that verifies computation results. Be aware that as the compiler improves, it may become better at eliding benchmarks whose results are not saved.</p><pre><code class="language-julia-repl hljs">julia&gt; @b 1
0.713 ns

julia&gt; @b 1.0
1.135 ns

julia&gt; @b 1.0 checksum=false
0 ns</code></pre><p>You may experiment with custom reductions using the internal <code>_map</code> and <code>_reduction</code> keyword arguments. The default maps and reductions (<code>Chairmarks.default_map</code> and <code>Chairmarks.default_reduction</code>) are internal and subject to change and/or removal in future.</p><h2 id="Innate-qualities"><a class="docs-heading-anchor" href="#Innate-qualities">Innate qualities</a><a id="Innate-qualities-1"></a><a class="docs-heading-anchor-permalink" href="#Innate-qualities" title="Permalink"></a></h2><p>Charimarks is inherently narrower than BenchmarkTools by construction. It also has more reliable back support. Back support is a defining feature of chairs while benches are known to sometimes lack back support.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../tutorial/">Tutorial »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Sunday 3 March 2024 03:46">Sunday 3 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
