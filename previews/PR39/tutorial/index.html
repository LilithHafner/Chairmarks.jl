<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · Chairmarks.jl</title><meta name="title" content="Tutorial · Chairmarks.jl"/><meta property="og:title" content="Tutorial · Chairmarks.jl"/><meta property="twitter:title" content="Tutorial · Chairmarks.jl"/><meta name="description" content="Documentation for Chairmarks.jl."/><meta property="og:description" content="Documentation for Chairmarks.jl."/><meta property="twitter:description" content="Documentation for Chairmarks.jl."/><meta property="og:url" content="https://Chairmarks.lilithhafner.com/tutorial/"/><meta property="twitter:url" content="https://Chairmarks.lilithhafner.com/tutorial/"/><link rel="canonical" href="https://Chairmarks.lilithhafner.com/tutorial/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Chairmarks.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../why/">Why use Chairmarks?</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a></li><li><span class="tocitem">How To</span><ul><li><a class="tocitem" href="../migration/">...migrate from BenchmarkTools</a></li><li><a class="tocitem" href="../autoload/">...install Charimarks ergonomically</a></li><li><a class="tocitem" href="../regressions/">...perform automated regression testing on a package</a></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/LilithHafner/Chairmarks.jl/blob/main/docs/src/tutorial.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial"><a class="docs-heading-anchor" href="#Tutorial">Tutorial</a><a id="Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial" title="Permalink"></a></h1><p>Welcome! This tutorial assumes very little prior knowledge and walks you through how to become a proficient user of Chairmarks.jl. If you are already an experienced user of BenchmarkTools, you may want to read about <a href="../migration/#migration">how to migrate from BenchmarkTools to Chairmarks</a> instead.</p><p>If you don&#39;t have Julia already, download it from <a href="https://julialang.org/downloads/">julialang.org/downloads</a>.</p><p>Now, launch a Julia REPL by typing <code>julia</code> at the command line.</p><p>To install Chairmarks, type <code>]</code> to enter the package manager, and then type</p><pre><code class="language-julia-repl hljs">(@v1.xx) pkg&gt; add Chairmarks</code></pre><p>This will install Chairmarks into your default environment. Unlike most packages, installing Chairmarks into your default environment <em>is</em> recommended because it is a very lightweight package and a development tool.</p><p>Now, you can use Chairmarks by typing <code>using Chairmarks</code> in the REPL. Press backspace to exit the package manager and return to the REPL and run</p><pre><code class="language-julia-repl hljs">julia&gt; using Chairmarks

julia&gt; @b rand(100)
95.500 ns (2 allocs: 928 bytes)</code></pre><p>Congratulations! This is your first result from Chairmarks. Let&#39;s look a little closer at the invocation and results. <code>@b</code> is a macro exported from Chairmarks. It takes the expression <code>rand(100)</code> and runs it a bunch of times, measuring how long it takes to run.</p><p>The result, <code>95.500 ns (2 allocs: 928 bytes)</code> tells us that the expression takes 95.5 nanoseconds to run and allocates 928 bytes of memory spread across two distinct allocation events. The exact results you get will likely differ based on your hardware and the Julia version you are using. These results from Julia 1.11.</p><p>By default, Chairmarks reports the <em>fastest</em> runtime of the expression. This is typically the best choice for reducing noise in microbenchmarks as things like garbage collection and other background tasks can cause inconsistent slowdowns but but speedups. If you want to get the full results, use the <code>@be</code> macro. (<code>@be</code> is longer than <code>@b</code> and gives a longer output)</p><pre><code class="language-julia-repl hljs">julia&gt; @be rand(100)
Benchmark: 19442 samples with 25 evaluations
min    95.000 ns (2 allocs: 928 bytes)
median 103.320 ns (2 allocs: 928 bytes)
mean   140.096 ns (2 allocs: 928 bytes, 0.36% gc time)
max    19.748 μs (2 allocs: 928 bytes, 96.95% gc time)</code></pre><p>This invocation runs the same experiment as <code>@b</code>, but reports more results. It ran 19442 samples, each of which involved recording some performance counters, running <code>rand(100)</code> 25 times, and then recording the performance counters again and computing the difference. The reported runtimes and allocations are those differences divided by the number of evaluations. We can see here that the runtime of <code>rand(100)</code> is pretty stable. 50% of the time it ranges between 95 and 103.3 nanoseconds. However, the maximum time is two orders of magnitude slower than the mean time. This is because the maximum time includes a garbage collection event that took 96.95% of the time.<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></p><p>Sometimes, we wish to measure the runtime of a function that requires some data to operate on, but don&#39;t want to measure the runtime of the function that generates the data. For example, we may want to compare how long it takes to hash an array of numbers, but we don&#39;t want to include the time it takes to generate the input in our measurements. We can do this using Chairmarks&#39; pipeline syntax:</p><pre><code class="language-julia-repl hljs">julia&gt; @b rand(100) hash
166.665 ns</code></pre><p>The first argument is called once per sample, and the second argument is called once per evaluation, each time passed the result of the first argument. We can also use the special <code>_</code> variable to refer to the output of the previous step. Here, we compare two different implementations of the norm of a vector</p><pre><code class="language-julia-repl hljs">julia&gt; @b rand(100) sqrt(sum(_ .* _))
37.628 ns (2 allocs: 928 bytes)

julia&gt; @b rand(100) sqrt(sum(x-&gt;x^2, _))
11.053 ns</code></pre><p>The _ refers to the array whose norm is to be computed. Both implementations are quite fast. These measurements are on a 3.5 GHz CPU so it appears that the first implementation takes about one clock cycle per element, with a bit of overhead. The second, on the other hand, appears to be running much faster than that, likely because it is making use of SIMD instructions.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>note that the samples are aggregated element wise, so the max field reports the maximum runtime and the maximum proportion of runtime spent in garbage collection (gc). Thus it is possible that the trial which had a 19.748 μs runtime was not the same trial that spent 96.95% of its time in garbage collection. This is in order to make the results more consistent. If half the trials spend 10% of their time in gc amd runtime varies based on other factors, it would be unfortunate to report maximum gc time as either 10% or 0% at random depending on whether the longest running trial happened to trigger gc.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../why/">« Why use Chairmarks?</a><a class="docs-footer-nextpage" href="../migration/">...migrate from BenchmarkTools »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Saturday 2 March 2024 21:37">Saturday 2 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
